FROM php:7.2.3-apache-stretch

MAINTAINER Chamunks chamunks AT gmail.com


###########################
## Environment Variables ##
###########################
#  DB_SERVER is the host name with the database server (if it's available on a custom port, for instance 3333, simply add :3333)
#  DB_USERNAME is the username to be used to access the database server
#  DB_PASSWORD is the password associated to DB_USERNAME
#  DB_NAME is the name of the database to use (it must exist and it must be empty)
#  CT_SITE_NAME is the name to give to the new concrete5 installation (will be shown for instance in the page titles)
#  C5_STARTING_POINT specify which set of initial data should be installed. By default concrete5 comes with elemental_full and elemental_blank
#  C5_EMAIL is the email to associate to the admin account that will be created on the new concrete5 installation
#  C5_PASSWORD is the password to assign to the admin account that will be created on the new concrete5 installation
#  C5_LOCALE (this is optional) is the code of the default site language (by default it's en_US)

ENV DB_SERVER         $MYSQL_SERVER
ENV DB_USERNAME       $MYSQL_USERNAME
ENV DB_PASSWORD       $MYSQL_PASSWORD
ENV DB_NAME           $MYSQL_DATABASE
ENV CT_SITE_NAME      default
ENV C5_STARTING_POINT elemental_full
ENV C5_EMAIL          default@example.com
ENV C5_PASSWORD       default
ENV C5_LOCALE         en_US
ENV PRESEED           true


RUN apt-get update && apt-get install -y && \
    zlib1g-dev \
    libpng-dev && \
    docker-php-ext-install mysqli && \
    docker-php-ext-install zip && \
    docker-php-ext-install gd && \
    docker-php-ext-install pdo_mysql && \
    a2enmod rewrite

ADD docker-entrypoint /bin/docker-entrypoint
ADD start.sh /bin/start-c5

RUN

EXPOSE 80

ENTRYPOINT ["docker-entrypoint"]

CMD ["start-c5"]
